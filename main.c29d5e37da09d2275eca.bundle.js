(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return MapkitProvider_MapkitProvider})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Map_Map})),__webpack_require__.d(__webpack_exports__,"c",(function(){return Marker_Marker})),__webpack_require__.d(__webpack_exports__,"d",(function(){return useMap_useMap}));var slicedToArray=__webpack_require__(103),react=__webpack_require__(0),react_default=__webpack_require__.n(react),little_loader=__webpack_require__(311),little_loader_default=__webpack_require__.n(little_loader),MapkitContext=react_default.a.createContext({isInProvider:!1,mapkit:void 0}),MapkitProvider_MapkitProvider=function MapkitProvider(_ref){var tokenOrCallback=_ref.tokenOrCallback,language=_ref.language,children=_ref.children,existingContext=react_default.a.useContext(MapkitContext),_React$useState=react_default.a.useState({mapkit:existingContext.mapkit,isInProvider:!0}),_React$useState2=Object(slicedToArray.a)(_React$useState,2),context=_React$useState2[0],setContext=_React$useState2[1];return react_default.a.useEffect((function(){existingContext.isInProvider||little_loader_default()("https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js",(function(){var isCallback=tokenOrCallback.includes("/");mapkit.init({authorizationCallback:function authorizationCallback(done){isCallback?fetch(tokenOrCallback).then((function(res){return res.text()})).then(done):done(tokenOrCallback)},language:language}),setContext({mapkit:mapkit,isInProvider:!0})}))}),[existingContext.isInProvider,tokenOrCallback,language]),react_default.a.createElement(MapkitContext.Provider,{value:context,children:children})},objectWithoutProperties=__webpack_require__(63),toConsumableArray=__webpack_require__(82),objectSpread2=__webpack_require__(200),_excluded=["visibleMapRect","region","center","padding"],_excluded2=["padding"],createPadding=function createPadding(padding){return new mapkit.Padding("number"==typeof padding?{top:padding,right:padding,bottom:padding,left:padding}:padding)},createCoordinate=function createCoordinate(latitude,longitude){return new mapkit.Coordinate(latitude,longitude)},createCoordinateRegionFromValues=function createCoordinateRegionFromValues(region){return createCoordinateRegion(createCoordinate(region.latitude,region.longitude),function createCoordinateSpan(latitudeDelta,longitudeDelta){return new mapkit.CoordinateSpan(latitudeDelta,longitudeDelta)}(region.latitudeSpan,region.longitudeSpan))},createCoordinateRegion=function createCoordinateRegion(center,span){return new mapkit.CoordinateRegion(center,span)},createMapRect=function createMapRect(x,y,width,height){return new mapkit.MapRect(x,y,width,height)},utils_propsToMapConstructionOptions=function propsToMapConstructionOptions(_ref){var visibleMapRect=_ref.visibleMapRect,region=_ref.region,center=_ref.center,padding=_ref.padding,options=Object(objectWithoutProperties.a)(_ref,_excluded);return Object(objectSpread2.a)({visibleMapRect:visibleMapRect&&createMapRect.apply(void 0,Object(toConsumableArray.a)(visibleMapRect)),region:region&&createCoordinateRegionFromValues(region),center:center&&createCoordinate.apply(void 0,Object(toConsumableArray.a)(center)),padding:createPadding(padding||0)},options)},useMap_useMap=function useMap(){var defaultOptions=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_React$useState=react_default.a.useState(defaultOptions),_React$useState2=Object(slicedToArray.a)(_React$useState,1),defaultMapOptions=_React$useState2[0],_React$useContext=react_default.a.useContext(MapkitContext),mapkit=_React$useContext.mapkit,mapRef=react_default.a.useRef(null),_React$useState3=react_default.a.useState(),_React$useState4=Object(slicedToArray.a)(_React$useState3,2),map=_React$useState4[0],setMap=_React$useState4[1];return react_default.a.useEffect((function(){if(mapkit&&mapRef.current){var newMap=new mapkit.Map(mapRef.current,utils_propsToMapConstructionOptions(defaultMapOptions));setMap(newMap)}}),[mapRef,mapkit]),react_default.a.useEffect((function(){return function(){map&&map.destroy()}}),[]),{mapkit:mapkit,map:map,mapProps:{mapkit:mapkit,map:map,mapRef:mapRef},setRotation:react_default.a.useCallback((function(rotationValue){var isAnimated=arguments.length>1&&void 0!==arguments[1]&&arguments[1];map&&map.setRotationAnimated(rotationValue,isAnimated)}),[map]),setCenter:react_default.a.useCallback((function(centerValue){var isAnimated=arguments.length>1&&void 0!==arguments[1]&&arguments[1];map&&map.setCenterAnimated(createCoordinate.apply(void 0,Object(toConsumableArray.a)(centerValue)),isAnimated)}),[map]),setRegion:react_default.a.useCallback((function(region){var isAnimated=arguments.length>1&&void 0!==arguments[1]&&arguments[1];map&&map.setRegionAnimated(createCoordinateRegionFromValues(region),isAnimated)}),[map]),setVisibleMapRect:react_default.a.useCallback((function(visibleMapRect){var isAnimated=arguments.length>1&&void 0!==arguments[1]&&arguments[1];map&&map.setVisibleMapRectAnimated(createMapRect.apply(void 0,Object(toConsumableArray.a)(visibleMapRect)),isAnimated)}),[map])}},Map_excluded=["children"],Map_excluded2=["tokenOrCallback","language","mapkit","map","mapRef"],MapContext=react_default.a.createContext({map:void 0,mapkit:void 0}),Map_MapProvider=function MapProvider(_ref){var children=_ref.children,context=_ref.context;return react_default.a.createElement(MapContext.Provider,{value:context,children:children})},Map_MapContainer=function MapContainer(_ref2){var children=_ref2.children,mapRef=_ref2.mapRef;return react_default.a.createElement("div",{ref:mapRef,style:{width:"100%",height:"100%"},children:children})},Map_CreateMap=function CreateMap(_ref3){var children=_ref3.children,defaultOptions=Object(objectWithoutProperties.a)(_ref3,Map_excluded),_useMap$mapProps=useMap_useMap(defaultOptions).mapProps,mapkit=_useMap$mapProps.mapkit,map=_useMap$mapProps.map,mapRef=_useMap$mapProps.mapRef;return react_default.a.createElement(Map_MapProvider,{context:{mapkit:mapkit,map:map}},react_default.a.createElement(Map_MapContainer,{mapRef:mapRef,children:children}))},Map_Map=function Map(_ref4){var tokenOrCallback=_ref4.tokenOrCallback,_ref4$language=_ref4.language,language=void 0===_ref4$language?"en":_ref4$language,mapkit=_ref4.mapkit,map=_ref4.map,mapRef=_ref4.mapRef,props=Object(objectWithoutProperties.a)(_ref4,Map_excluded2),context=react_default.a.useContext(MapkitContext);if(mapRef)return react_default.a.createElement(Map_MapProvider,{context:{mapkit:mapkit,map:map}},react_default.a.createElement(Map_MapContainer,Object.assign({mapRef:mapRef},props)));var mapBox=react_default.a.createElement(Map_CreateMap,props);if(context.isInProvider)return mapBox;if(!tokenOrCallback)throw new Error("`tokenOrCallback` is required. Either add it to this `Map` component or to a `MapkitProvider` parent of this component.");return react_default.a.createElement(MapkitProvider_MapkitProvider,{tokenOrCallback:tokenOrCallback,language:language,children:mapBox})},Marker_excluded=["latitude","longitude"],Marker_Marker=function Marker(_ref){var latitude=_ref.latitude,longitude=_ref.longitude,options=Object(objectWithoutProperties.a)(_ref,Marker_excluded),_React$useContext=react_default.a.useContext(MapContext),mapkit=_React$useContext.mapkit,map=_React$useContext.map,marker=react_default.a.useRef();return react_default.a.useEffect((function(){return mapkit&&map&&(marker.current=new mapkit.MarkerAnnotation(createCoordinate(latitude,longitude),function propsToMarkerConstructionOptions(_ref2){var padding=_ref2.padding,options=Object(objectWithoutProperties.a)(_ref2,_excluded2);return Object(objectSpread2.a)({padding:createPadding(padding||0)},options)}(options)),map.addAnnotation(marker.current)),function(){marker.current&&map&&map.removeAnnotation(marker.current)}}),[mapkit,map]),null}},22:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a="eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6Iko5UVFBWDQ3MkYifQ.eyJpYXQiOjE2MzcyNjAwNTAuNDQ3LCJpc3MiOiJMU1pKM0E4MkhZIiwib3JpZ2luIjoiaHR0cHM6Ly9jaHJpc2RyYWNrZXR0LmdpdGh1Yi5pbyJ9.q0-MDrAryM3ERibnFqJ8VJL_iYwu2WNuuiKnisvkOZEEHXTU9iv7saYW2rCs2ideSSeFcFQ2se0ufbD6A95EYQ"},310:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Wrapper}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),Wrapper=function(storyFn){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{style:{width:"100vw",height:"100vh"}},storyFn())};Wrapper.displayName="Wrapper",Wrapper.__docgenInfo={description:"",methods:[],displayName:"Wrapper"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES[".storybook/Wrapper.js"]={name:"Wrapper",docgenInfo:Wrapper.__docgenInfo,path:".storybook/Wrapper.js"})},312:function(module,exports,__webpack_require__){__webpack_require__(313),__webpack_require__(470),module.exports=__webpack_require__(471)},379:function(module,exports){},471:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(64),_storybook_addon_knobs_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(309),_Wrapper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(310),req=__webpack_require__(674);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(_storybook_addon_knobs_react__WEBPACK_IMPORTED_MODULE_1__.withKnobs),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.addDecorator)(_Wrapper__WEBPACK_IMPORTED_MODULE_2__.a),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_0__.configure)((function loadStories(){req.keys().forEach((function(filename){return req(filename)}))}),module)}.call(this,__webpack_require__(245)(module))},674:function(module,exports,__webpack_require__){var map={"./index.stories.tsx":675};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=674},675:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64),_src__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(13),_devToken__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(22),withSourceLoader=__webpack_require__(308).withSource,__SOURCE_PREFIX__=(__webpack_require__(308).addSource,"/Users/cwd/Developer/react-mapkit/stories"),__STORY__="import React from 'react'\n\nimport { storiesOf } from '@storybook/react'\n\nimport { Map, MapkitProvider, useMap, Marker } from '../src'\nimport devToken from '../devToken'\n\nconst UseMapExample = () => {\n  const { setRotation, mapProps } = useMap()\n\n  return (\n    <>\n      <button onClick={() => setRotation(Math.random() * 360)}>rotate!</button>\n      <Map {...mapProps} />\n    </>\n  )\n}\n\nstoriesOf('Use', module)\n  .add('with a provider', () => (\n    <MapkitProvider tokenOrCallback={devToken}>\n      <Map />\n    </MapkitProvider>\n  ))\n  .add('just a Map', () => <Map tokenOrCallback={devToken} />)\n  .add('using a ref', () => {\n    return (\n      <MapkitProvider tokenOrCallback={devToken}>\n        <UseMapExample />\n      </MapkitProvider>\n    )\n  })\n  .add('multiple providers', () => (\n    <>\n      <MapkitProvider tokenOrCallback={devToken}>\n        <Map />\n      </MapkitProvider>\n      <MapkitProvider tokenOrCallback={devToken}>\n        <Map />\n      </MapkitProvider>\n    </>\n  ))\n\nstoriesOf('Defaults', module)\n  .add('center', () => (\n    <Map tokenOrCallback={devToken} center={[37.415, -122.048333]} />\n  ))\n  .add('visibleMapRect', () => (\n    <Map tokenOrCallback={devToken} visibleMapRect={[0.5, 0.2, 0.3, 0.4]} />\n  ))\n  .add('region', () => (\n    <Map\n      tokenOrCallback={devToken}\n      region={{\n        latitude: 37.415,\n        longitude: -122.048333,\n        latitudeSpan: 0.016,\n        longitudeSpan: 0.016,\n      }}\n    />\n  ))\n  .add('rotation', () => <Map tokenOrCallback={devToken} rotation={90} />)\n  .add('tint', () => <Map tokenOrCallback={devToken} tintColor={'#00b64e'} />)\n  .add('padding', () => <Map tokenOrCallback={devToken} padding={20} />)\n\nstoriesOf('Markers', module).add('adding a marker', () => (\n  <Map\n    tokenOrCallback={devToken}\n    region={{\n      latitude: 47.6754,\n      longitude: -122.2084,\n      latitudeSpan: 0.006,\n      longitudeSpan: 0.006,\n    }}\n  >\n    <Marker latitude={47.6754} longitude={-122.2084} />\n    <Marker\n      latitude={47.6764}\n      longitude={-122.2073}\n      title={'Tea here!'}\n      subtitle={'coffee too ☕'}\n    />\n  </Map>\n))\n",__ADDS_MAP__={"use--multiple-providers":{startLoc:{col:7,line:33},endLoc:{col:3,line:42},startBody:{col:29,line:33},endBody:{col:3,line:42}},"use--using-a-ref":{startLoc:{col:7,line:26},endLoc:{col:3,line:32},startBody:{col:22,line:26},endBody:{col:3,line:32}},"use--just-a-map":{startLoc:{col:7,line:25},endLoc:{col:61,line:25},startBody:{col:21,line:25},endBody:{col:61,line:25}},"use--with-a-provider":{startLoc:{col:7,line:20},endLoc:{col:3,line:24},startBody:{col:26,line:20},endBody:{col:3,line:24}},"defaults--padding":{startLoc:{col:7,line:64},endLoc:{col:71,line:64},startBody:{col:18,line:64},endBody:{col:71,line:64}},"defaults--tint":{startLoc:{col:7,line:63},endLoc:{col:77,line:63},startBody:{col:15,line:63},endBody:{col:77,line:63}},"defaults--rotation":{startLoc:{col:7,line:62},endLoc:{col:73,line:62},startBody:{col:19,line:62},endBody:{col:73,line:62}},"defaults--region":{startLoc:{col:7,line:51},endLoc:{col:3,line:61},startBody:{col:17,line:51},endBody:{col:3,line:61}},"defaults--visiblemaprect":{startLoc:{col:7,line:48},endLoc:{col:3,line:50},startBody:{col:25,line:48},endBody:{col:3,line:50}},"defaults--center":{startLoc:{col:7,line:45},endLoc:{col:3,line:47},startBody:{col:17,line:45},endBody:{col:3,line:47}},"markers--adding-a-marker":{startLoc:{col:33,line:66},endLoc:{col:1,line:84},startBody:{col:52,line:66},endBody:{col:1,line:84}}},__MODULE_DEPENDENCIES__=[],__LOCAL_DEPENDENCIES__={},__IDS_TO_FRAMEWORKS__={},UseMapExample=function UseMapExample(){var _useMap=Object(_src__WEBPACK_IMPORTED_MODULE_2__.d)(),setRotation=_useMap.setRotation,mapProps=_useMap.mapProps;return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("button",{onClick:function onClick(){return setRotation(360*Math.random())}},"rotate!"),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,mapProps))};Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("Use",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/index.stories.tsx",__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__)).add("with a provider",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.b,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,null))})).add("just a Map",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a})})).add("using a ref",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.b,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(UseMapExample,null))})).add("multiple providers",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.b,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,null)),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.b,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,null)))})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("Defaults",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/index.stories.tsx",__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__)).add("center",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a,center:[37.415,-122.048333]})})).add("visibleMapRect",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a,visibleMapRect:[.5,.2,.3,.4]})})).add("region",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a,region:{latitude:37.415,longitude:-122.048333,latitudeSpan:.016,longitudeSpan:.016}})})).add("rotation",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a,rotation:90})})).add("tint",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a,tintColor:"#00b64e"})})).add("padding",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a,padding:20})})),Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("Markers",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/index.stories.tsx",__MODULE_DEPENDENCIES__,__LOCAL_DEPENDENCIES__,__SOURCE_PREFIX__,__IDS_TO_FRAMEWORKS__)).add("adding a marker",(function(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.a,{tokenOrCallback:_devToken__WEBPACK_IMPORTED_MODULE_3__.a,region:{latitude:47.6754,longitude:-122.2084,latitudeSpan:.006,longitudeSpan:.006}},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.c,{latitude:47.6754,longitude:-122.2084}),react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_2__.c,{latitude:47.6764,longitude:-122.2073,title:"Tea here!",subtitle:"coffee too ☕"}))}))}.call(this,__webpack_require__(245)(module))}},[[312,1,2]]]);
//# sourceMappingURL=main.c29d5e37da09d2275eca.bundle.js.map